<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; Pegasus Simulator  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Development" href="developer.html" />
    <link rel="prev" title="Pegasus Simulator" href="../../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #FFD700" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing-nvidia-isaac-sim">Installing NVIDIA Isaac Sim</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-the-environment-variables">Configuring the environment variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-isaac-sim">Running Isaac Sim</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installing-the-pegasus-simulator">Installing the Pegasus Simulator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-the-extension-as-a-library">Installing the extension as a library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installing-px4-autopilot">Installing PX4-Autopilot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-the-px4-path-inside-the-pegasus-simulator">Setting the PX4 path inside the Pegasus Simulator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Development</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/run_extension_mode.html">Run in Extension Mode (GUI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/create_standalone_application.html">Create a Standalone Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/create_standalone_simulation.html">Your First Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/create_custom_backend.html">Create a Custom Controller</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features/environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/vehicles.html">Vehicles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/px4_integration.html">PX4 Integration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Source API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/known_issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/bibliography.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #FFD700" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Pegasus Simulator</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/source/setup/installation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h1>
<section id="installing-nvidia-isaac-sim">
<h2>Installing NVIDIA Isaac Sim<a class="headerlink" href="#installing-nvidia-isaac-sim" title="Permalink to this heading"></a></h2>
<a class="reference external image-reference" href="https://developer.nvidia.com/isaac-sim"><img alt="IsaacSim 2022.2.0" src="https://img.shields.io/badge/IsaacSim-2022.2.0-brightgreen.svg" /></a>
<a class="reference external image-reference" href="https://github.com/PX4/PX4-Autopilot"><img alt="PX4-Autopilot 1.13.2" src="https://img.shields.io/badge/PX4--Autopilot-1.13.2-brightgreen.svg" /></a>
<a class="reference external image-reference" href="https://releases.ubuntu.com/20.04/"><img alt="Ubuntu 20.04" src="https://img.shields.io/badge/Ubuntu-20.04LTS-brightgreen.svg" /></a>
<a class="reference external image-reference" href="https://releases.ubuntu.com/22.04/"><img alt="Ubuntu 22.04" src="https://img.shields.io/badge/Ubuntu-22.04LTS-brightgreen.svg" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We have tested Pegasus Simulator with Isaac Sim 2022.2 release on Ubuntu 22.04LTS with NVIDIA driver 525.85. The PX4-Autopilot used during development was v.13.2. Older versions Ubuntu and PX4-Autopilot were not tested. This extension was not tested on Windows.</p>
</div>
</section>
<section id="configuring-the-environment-variables">
<h2>Configuring the environment variables<a class="headerlink" href="#configuring-the-environment-variables" title="Permalink to this heading"></a></h2>
<p>NVIDIA provides Isaac Sim with its own Python interpreter along with some basic extensions such as numpy and pytorch. In
order for the Pegasus Simulator to work, we require the user to use the same python environment when starting a simulation
from python scripts. As such, we recommend setting up a few custom environment variables to make this process simpler.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although it is possible to setup a virtual environment following the
instructions <a class="reference external" href="https://docs.omniverse.nvidia.com/app_isaacsim/app_isaacsim/install_python.html">here</a>, this
feature was not tested.</p>
</div>
<p>Start by locating the <a class="reference external" href="https://docs.omniverse.nvidia.com/app_isaacsim/app_isaacsim/install_python.html">Isaac Sim installation</a>
by navigating to Isaac Sim’s root folder. Typically, in Linux, this folder can be found under <code class="docutils literal notranslate"><span class="pre">${HOME}/.local/share/ov/pkg/isaac_sim-*</span></code>,
where the <code class="docutils literal notranslate"><span class="pre">*</span></code> is the version number.</p>
<p>Add the following lines to your <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> or <code class="docutils literal notranslate"><span class="pre">~/.zshrc</span></code> file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Isaac Sim root directory</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ISAACSIM_PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/.local/share/ov/pkg/isaac_sim-*&quot;</span>
<span class="c1"># Isaac Sim python executable</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">ISAACSIM_PYTHON</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">ISAACSIM_PATH</span><span class="si">}</span><span class="s2">/python.sh&quot;</span>
<span class="c1"># Isaac Sim app</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">ISAACSIM</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">ISAACSIM_PATH</span><span class="si">}</span><span class="s2">/isaac-sim.sh&quot;</span>
</pre></div>
</div>
<p>If you only have one version of Isaac Sim installed, you can leave the <code class="docutils literal notranslate"><span class="pre">*</span></code>, otherwise you will have to replace it by the
version that you desire to use. In the remaining of the documentation, we will refer to the Isaac Sim’s path as <code class="docutils literal notranslate"><span class="pre">ISAACSIM_PATH</span></code> ,
the provided python interpreter as <code class="docutils literal notranslate"><span class="pre">ISAACSIM_PYTHON</span></code> and the simulator itself as <code class="docutils literal notranslate"><span class="pre">ISAACSIM</span></code> .</p>
<section id="running-isaac-sim">
<h3>Running Isaac Sim<a class="headerlink" href="#running-isaac-sim" title="Permalink to this heading"></a></h3>
<p>At this point, you are expected to have NVIDIA Isaac Sim fully installed and working. To make sure you have everything setup correctly,
open a new terminal window (<strong>Ctrl+Alt+T</strong>), and test the following commands:</p>
<ul>
<li><p>Check that the simulator app can be launched</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the simulator with the --help argument to see all available options</span>
ISAACSIM<span class="w"> </span>--help

<span class="c1"># Run the simulator. A new window should open</span>
ISAACSIM
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Check that you can launch the simulator from a python script (standalone mode)</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Run the bundled python interpreter and see if it prints on the terminal &quot;Hello World.&quot;</span>
ISAACSIM_PYTHON<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;print(&#39;Hello World.&#39;)&quot;</span>

<span class="c1"># Run the python interpreter and check if we can run a script that starts the simulator and adds cubes to the world</span>
ISAACSIM_PYTHON<span class="w"> </span><span class="si">${</span><span class="nv">ISAACSIM_PATH</span><span class="si">}</span>/standalone_examples/api/omni.isaac.core/add_cubes.py
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p>If you were unable to run the commands above successfuly, then something is incorrectly configured.
Please do not proceed with this installation until you have everything setup correctly.</p>
<p>Addtional Isaac Sim resources:
- <a class="reference external" href="https://docs.omniverse.nvidia.com/app_isaacsim/prod_kit/linux-troubleshooting.html">Troubleshooting documentation</a></p>
</section>
</section>
<section id="installing-the-pegasus-simulator">
<h2>Installing the Pegasus Simulator<a class="headerlink" href="#installing-the-pegasus-simulator" title="Permalink to this heading"></a></h2>
<p>Clone the <a class="reference external" href="https://www.github.com/PegasusResearch/Pegasus-Simulator.git">Pegasus Simulator</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Option 1: With HTTPS</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/PegasusResearch/Pegasus-Simulator.git
<span class="c1"># Option 2: With SSH (you need to setup a github account with ssh keys)</span>
git<span class="w"> </span>clone<span class="w"> </span>git@github.com:PegasusResearch/Pegasus-Simulator.git
</pre></div>
</div>
<p>The Pegasus Simulator was originally developed as an Isaac Sim extension with an interactive GUI, but also provides a powerfull
API that allows it to run as a standalone app, i.e. by creating python scritps (as shown in the examples directory of this repository).
To be able to use the extension in both modes, follow these steps:</p>
<ol class="arabic">
<li><p>Launch <code class="docutils literal notranslate"><span class="pre">ISAACSIM</span></code> application.</p></li>
<li><p>Open the Window-&gt;extensions on the top menubar inside Isaac Sim.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/extensions_menu_bar.png"><img alt="Extensions on top menubar" class="align-center" src="../../_images/extensions_menu_bar.png" style="width: 600px;" /></a>
</div></blockquote>
</li>
</ol>
<p>3. On the Extensions manager menu, we can enable or disable extensions. By pressing the settings button, we can
add a path to the Pegasus-Simulator repository.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/extensions_widget.png"><img alt="Extensions widget" class="align-center" src="../../_images/extensions_widget.png" style="width: 600px;" /></a>
</div></blockquote>
<ol class="arabic" start="4">
<li><p>The path inserted should be the path to the repository followed by <code class="docutils literal notranslate"><span class="pre">/extensions</span></code>.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/ading_extension_path.png"><img alt="Adding extension path to the extension manager" class="align-center" src="../../_images/ading_extension_path.png" style="width: 600px;" /></a>
</div></blockquote>
</li>
<li><p>After adding the path to the extension, we can enable the Pegasus Simulator extension on the third-party tab.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/pegasus_inside_extensions_menu.png"><img alt="Pegasus Extension on the third-party tab" class="align-center" src="../../_images/pegasus_inside_extensions_menu.png" style="width: 600px;" /></a>
</div></blockquote>
</li>
</ol>
<p>When enabling the extension for the first time, the python requirements should be install automatically for the build in
<code class="docutils literal notranslate"><span class="pre">ISAACSIM_PYTHON</span></code> , and after a few seconds, the Pegasus widget GUI should pop-up.</p>
<ol class="arabic" start="6">
<li><p>The Pegasus Simulator window should appear docked to the bottom-right section of the screen.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/pegasus_gui_example.png"><img alt="Pegasus Extension GUI after install" class="align-center" src="../../_images/pegasus_gui_example.png" style="width: 600px;" /></a>
</div></blockquote>
</li>
</ol>
<section id="installing-the-extension-as-a-library">
<h3>Installing the extension as a library<a class="headerlink" href="#installing-the-extension-as-a-library" title="Permalink to this heading"></a></h3>
<p>In order to be able to use the Pegasus Simulator API from python scripts and standalone apps, we must install this
extension as a <code class="docutils literal notranslate"><span class="pre">pip</span></code> python module for the built-in <code class="docutils literal notranslate"><span class="pre">ISAACSIM_PYTHON</span></code> to recognize. For that, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Go to the repository of the pegasus simulator</span>
<span class="nb">cd</span><span class="w"> </span>pegasus_simulator

<span class="c1"># Go into the extensions directory</span>
<span class="nb">cd</span><span class="w"> </span>extensions

<span class="c1"># Run the pip command using the built-in python interpreter</span>
ISAACSIM_PYTHON<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--editable<span class="w"> </span>pegasus.simulator
</pre></div>
</div>
<p>We use the <code class="docutils literal notranslate"><span class="pre">--editable</span></code> flag so that the content of the extension is linked instead of copied. After this step, you
should be able to run the python standalone examples inside the <code class="docutils literal notranslate"><span class="pre">examples</span></code> folder.</p>
</section>
</section>
<section id="installing-px4-autopilot">
<h2>Installing PX4-Autopilot<a class="headerlink" href="#installing-px4-autopilot" title="Permalink to this heading"></a></h2>
<p>In this first version of the Pegasus Simulator (in extension mode), the GUI widget provided is only usefull if you intend to use the PX4-Autopilot.
To install PX4-Autopilot, follow the following steps:</p>
<ol class="arabic">
<li><p>Install the dependencies (to be able to compile PX4-Autopilot):</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Linux packages</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>git<span class="w"> </span>make<span class="w"> </span>cmake<span class="w"> </span>python3-pip

<span class="c1"># Python packages</span>
pip<span class="w"> </span>install<span class="w"> </span>kconfiglib<span class="w"> </span>jinja2<span class="w"> </span>empy<span class="w"> </span>jsonschema<span class="w"> </span>pyros-genmsg<span class="w"> </span>packaging<span class="w"> </span>toml<span class="w"> </span>numpy<span class="w"> </span>future
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Clone the <a class="reference external" href="https://github.com/PX4/PX4-Autopilot">PX4-Autopilot</a>:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Option 1: With HTTPS</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/PX4/PX4-Autopilot.git
<span class="c1"># Option 2: With SSH (you need to setup a github account with ssh keys)</span>
git<span class="w"> </span>clone<span class="w"> </span>git@github.com:PX4/PX4-Autopilot.git
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Checkout to the stable version 1.13.2 and compile the code for software-in-the-loop (SITL) mode:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Go to the PX4 directory</span>
<span class="nb">cd</span><span class="w"> </span>PX4-Autopilot

<span class="c1"># Checkout to the latest stable release</span>
git<span class="w"> </span>checkout<span class="w"> </span>v1.13.2

<span class="c1"># Initiate all the submodules. Note this will download modules such as SITL-gazebo which we do not need</span>
<span class="c1"># but this is the safest way to make sure that the PX4-Autopilot and its submodules are all checked out in</span>
<span class="c1"># a stable and well tested release</span>
git<span class="w"> </span>submodule<span class="w"> </span>update<span class="w"> </span>--init<span class="w"> </span>--recursive

<span class="c1"># Compile the code in SITL mode</span>
make<span class="w"> </span>px4_sitl_default<span class="w"> </span>none
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<section id="setting-the-px4-path-inside-the-pegasus-simulator">
<h3>Setting the PX4 path inside the Pegasus Simulator<a class="headerlink" href="#setting-the-px4-path-inside-the-pegasus-simulator" title="Permalink to this heading"></a></h3>
<p>The simulator provides a feature to auto-launch PX4-Autopilot for every vehicle that is spawned in the simulation world.
For this feature to work, we need to tell the Pegasus Simulator extension where the PX4-Autopilot directory can be found.
For that, edit the <code class="docutils literal notranslate"><span class="pre">PX4</span> <span class="pre">Path</span></code> text field if is not correct by default and press the <code class="docutils literal notranslate"><span class="pre">Make</span> <span class="pre">Default</span></code> button. This
field supports relative paths to the home directory, which means that you can use <code class="docutils literal notranslate"><span class="pre">~</span></code> to represent the home directory
without hard-coding it.</p>
<a class="reference internal image-reference" href="../../_images/pegasus_GUI_px4_dir.png"><img alt="Pegasus GUI with px4 directory highlighted" class="align-center" src="../../_images/pegasus_GUI_px4_dir.png" style="width: 600px;" /></a>
<p>By default, the extension assumes that PX4-Autopilot is installed at <code class="docutils literal notranslate"><span class="pre">~/PX4-Autopilot</span></code> .</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../index.html" class="btn btn-neutral float-left" title="Pegasus Simulator" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="developer.html" class="btn btn-neutral float-right" title="Development" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Marcelo Jacinto.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>